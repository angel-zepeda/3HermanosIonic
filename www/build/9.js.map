{"version":3,"sources":["../../src/pages/historial/historial.module.ts","../../src/pages/historial/historial.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACJ;AAU5C;IAAA;IAAkC,CAAC;IAAtB,mBAAmB;QAR/B,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,iEAAa;aACd;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,iEAAa,CAAC;aACxC;SACF,CAAC;OACW,mBAAmB,CAAG;IAAD,0BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACZU;AACmD;AAC3C;AAOlD;IAUE,uBACS,OAAsB,EACtB,SAAoB,EACnB,IAAgB,EAChB,KAAsB,EACvB,iBAAoC;QAJpC,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,SAAI,GAAJ,IAAI,CAAY;QAChB,UAAK,GAAL,KAAK,CAAiB;QACvB,sBAAiB,GAAjB,iBAAiB,CAAmB;QAd7C,sEAAsE;QACtE,QAAG,GAAG,wDAAwD,CAAC;QAC/D,iEAAiE;QACjE,YAAO,GAAG;YACR,OAAO,EAAE,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC;SACzC,CAAC;QACF,WAAM,GAAQ,EAAE,CAAC;QACjB,SAAI,GAAW,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAQzC,CAAC;IAEJ,sCAAc,GAAd;QACE,+CAA+C;QAC/C,2CAA2C;QAC3C,MAAM;QACN,oBAAoB;QAJtB,iBA2BC;QArBC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,UAAC,GAAG;YACnD,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,KAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC1B,IAAM,gBAAgB,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAChD,UAAC,MAAM,IAAK,aAAM,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAA7B,CAA6B,CAC1C,CAAC;gBACF,KAAI,CAAC,MAAM,GAAG,EAAE,MAAM,EAAE,gBAAgB,EAAE,CAAC;aAC5C;YAED,IAAI,KAAI,CAAC,IAAI,KAAK,MAAM,IAAI,KAAI,CAAC,IAAI,KAAK,MAAM,EAAE;gBAChD,IAAM,iBAAiB,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CACjD,UAAC,MAAM;oBACL,aAAM,CAAC,IAAI,CAAC,IAAI,KAAK,WAAW;gBAAhC,CAAgC,CACnC,CAAC;gBACF,KAAI,CAAC,MAAM,GAAG,EAAE,MAAM,EAAE,iBAAiB,EAAE,CAAC;aAC7C;YAED,IAAI,KAAI,CAAC,MAAM,CAAC,OAAO,KAAK,iBAAiB,EAAE;gBAC7C,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;aAClB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAO,GAAP,UAAQ,MAAM;QACZ,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QACvD,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QACpD,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;;IAnDU,aAAa;QAJzB,gEAAS,CAAC;YACT,QAAQ,EAAE,gBAAgB;WACG;SAC9B,CAAC;sBAgB6C;OAflC,aAAa,CAoDzB;IAAD,CAAC;AAAA;SApDY,aAAa,e","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HistorialPage } from './historial';\n\n@NgModule({\n  declarations: [\n    HistorialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HistorialPage),\n  ],\n})\nexport class HistorialPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/historial/historial.module.ts","import { Component } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  ModalController,\n  LoadingController,\n} from \"ionic-angular\";\nimport { HttpClient } from \"@angular/common/http\";\n\n@IonicPage()\n@Component({\n  selector: \"page-historial\",\n  templateUrl: \"historial.html\",\n})\nexport class HistorialPage {\n  // url = \"http://157.230.81.230:5000/api/history/report/by-shop/last\";\n  url = \"http://157.230.81.230:5000/api/history/reports/by-shop\";\n  // url = 'http://localhost:5000/api/history/report/by-shop/last';\n  shop_id = {\n    shop_id: localStorage.getItem(\"shop_id\"),\n  };\n  report: any = [];\n  role: string = localStorage.getItem(\"role\");\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private http: HttpClient,\n    private modal: ModalController,\n    public loadingController: LoadingController\n  ) {}\n\n  ionViewDidLoad() {\n    // let loader = this.loadingController.create({\n    //   content: \"Cargando ultimo reporte ...\"\n    // });\n    // loader.present();\n\n    this.http.post(this.url, this.shop_id).subscribe((res) => {\n      this.report = res;\n      if (this.role === \"tienda\") {\n        const filteredByTienda = this.report.report.filter(\n          (report) => report.user.role === \"tienda\"\n        );\n        this.report = { report: filteredByTienda };\n      }\n\n      if (this.role === \"zona\" || this.role === \"user\") {\n        const filteredByGerente = this.report.report.filter(\n          (report) =>\n            report.user.role !== \"ROLE_USER\"\n        );\n        this.report = { report: filteredByGerente };\n      }\n      \n      if (this.report.message === \"No hay reportes\") {\n        this.report = [];\n      }\n    });\n  }\n\n  details(report) {\n    localStorage.setItem(\"report\", JSON.stringify(report));\n    const myModal = this.modal.create(\"Historial2Page\");\n    myModal.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/historial/historial.ts"],"sourceRoot":""}